<script src="/socket.io/socket.io.js"></script> 
<form>
    <div id="chat"></div>
    <textarea name="text" id="text"></textarea>
    <input type="submit" class="submit" name="submit">
</form>
<script>
    var socket = io.connect();
    $('form').submit(function(){
        socket.emit('message', $('#text').val(), function(t){
            append(t);
            $('#text').val('');
        });
        return false;
    });
    socket.on('message', append);
    
    function append(t){
        $('#chat').append('<p>'+t+'</p>');
    }
</script>